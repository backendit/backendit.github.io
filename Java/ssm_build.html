<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Spring、SpringMVC、Mybatis框架搭建过程 - backendit</title><meta name="Description" content=""><meta property="og:title" content="Spring、SpringMVC、Mybatis框架搭建过程" />
<meta property="og:description" content="在工作中的项目有使用Spring、SpringMVC、Mybatis组合框架开发的，通常简称为SSM。这里记录一下搭建的过程，以便以后有需要的是否参考这搭建。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/Java/ssm_build.html" /><meta property="og:image" content="http://example.org/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-03-21T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-03-21T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://example.org/logo.png"/>

<meta name="twitter:title" content="Spring、SpringMVC、Mybatis框架搭建过程"/>
<meta name="twitter:description" content="在工作中的项目有使用Spring、SpringMVC、Mybatis组合框架开发的，通常简称为SSM。这里记录一下搭建的过程，以便以后有需要的是否参考这搭建。"/>
<meta name="application-name" content="backendit">
<meta name="apple-mobile-web-app-title" content="backendit"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://example.org/Java/ssm_build.html" /><link rel="prev" href="http://example.org/Java/builder_pattern.html" /><link rel="next" href="http://example.org/tools/virtualbox_setting.html" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Spring、SpringMVC、Mybatis框架搭建过程",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/example.org\/Java\/ssm_build.html"
        },"image": ["http:\/\/example.org\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "Java, 框架","wordcount":  4747 ,
        "url": "http:\/\/example.org\/Java\/ssm_build.html","datePublished": "2020-03-21T00:00:00+00:00","dateModified": "2020-03-21T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "http:\/\/example.org\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "backendit"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="backendit"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>backendit</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/" title="发表的文章"> 文章 </a><a class="menu-item" href="/tags/" title="标签云"> 标签 </a><a class="menu-item" href="/categories/" title="文章分类"> 分类 </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="backendit"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>backendit</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="发表的文章">文章</a><a class="menu-item" href="/tags/" title="标签云">标签</a><a class="menu-item" href="/categories/" title="文章分类">分类</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Spring、SpringMVC、Mybatis框架搭建过程</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>backendit</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/java/"><i class="far fa-folder fa-fw"></i>Java</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2020-03-21">2020-03-21</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 4747 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 10 分钟&nbsp;<span id="/Java/ssm_build.html" class="leancloud_visitors" data-flag-title="Spring、SpringMVC、Mybatis框架搭建过程">
                        <i class="far fa-eye fa-fw"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;次阅读
                    </span>&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#前言">前言</a></li>
    <li><a href="#步骤总览">步骤总览</a></li>
    <li><a href="#新建maven工程">新建maven工程</a></li>
    <li><a href="#安装maven及配置">安装maven及配置</a></li>
    <li><a href="#添加servletjsp依赖">添加servlet/jsp依赖</a></li>
    <li><a href="#总的pomxml内容">总的pom.xml内容</a></li>
    <li><a href="#配置整合springspringmvc">配置整合Spring、SpringMVC</a>
      <ul>
        <li><a href="#springmvcxml">SpringMVC.xml</a></li>
        <li><a href="#webxml">Web.xml</a></li>
        <li><a href="#测试springmvc">测试SpringMVC</a></li>
      </ul>
    </li>
    <li><a href="#配置整合springmybatis">配置整合Spring、Mybatis</a>
      <ul>
        <li><a href="#applicationcontextxml">applicationContext.xml</a></li>
        <li><a href="#dbproperties">db.properties</a></li>
        <li><a href="#测试整合情况">测试整合情况</a></li>
      </ul>
    </li>
    <li><a href="#配置整合log4j日志框架slf4j">配置整合log4j日志框架(slf4j)</a>
      <ul>
        <li><a href="#log4jproperties文件">log4j.properties文件</a></li>
        <li><a href="#在代码中使用日志器">在代码中使用日志器</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>在工作中的项目有使用Spring、SpringMVC、Mybatis组合框架开发的，通常简称为SSM。这里记录一下搭建的过程，以便以后有需要的是否参考这搭建。</p>
<p>在公司中都是别人已经搭建好的了，并且有时候自己想要测试一些功能的时候，不能用已经搭建好的工作中的工程，所以最好还是自己手动搭建一下，熟悉一下搭建过程，耗费不了多少时间，而且在以后的写一下小demo时也会可能用到。</p>
<h2 id="前言">前言</h2>
<p>该工程准备使用的框架主要是Spring、SpringMVC、Mybatis3，然后使用maven来管理jar包，因为maven管理jar方便，会解决jar依赖问题，打包或上传时使应用程序包不会显得体积庞大，而且会自动下载源码，在需要看源码时可以很有帮助。但在有一些内网开发的项目就只能使用手动管理jar包了。</p>
<p>SpringMVC老生常谈了，经典的MVC开发模式，不过现在流行前后端分离，似乎这套模式已经过时。但是也可作为后端的restful接口提供给前端使用，也是所用武之地。Mybatis3半自动化持久层管理，提供给开发人员很灵活的持久层开发和SQL优化功能。以前有用到hibernate等持久层框架，可能它太重量了，消耗内存，而且封装太紧，调试优化起来不太灵活。</p>
<h2 id="步骤总览">步骤总览</h2>
<p>主要分为以下目录：</p>
<ul>
<li>新建maven工程</li>
<li>配置整合Spring、SpringMVC</li>
<li>配置整合Spring、Mybatis</li>
<li>配置整合log4j日志框架</li>
</ul>
<h2 id="新建maven工程">新建maven工程</h2>
<p>我们选择新建一个maven工程，也可以把已有的web工程转换为maven工程，标准的maven工程目录如下所示，注意到这里默认没有java目录，所以我们还要手动新建一个java的源码包。注意要先事前配置好了maven。下面简单的说一下。</p>
<p>maven工程标准目录：
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/frameworks/maven-proj.png"
        data-srcset="/images/frameworks/maven-proj.png, /images/frameworks/maven-proj.png 1.5x, /images/frameworks/maven-proj.png 2x"
        data-sizes="auto"
        alt="/images/frameworks/maven-proj.png"
        title="maven工程标准目录" /></p>
<h2 id="安装maven及配置">安装maven及配置</h2>
<p>在网上下载maven，解压到任意目录中即可，如果想要在终端使用maven，则在系统环境变量中配置MAVEN_HOME。不同系统中在不同位置找到环境变量，在$PATH中追加即可。在Windows中可以在控制面板中，选择环境变量通过界面操作。在Mac中可以在.bash_profile文件中添加，然后<code>source ~/.bash_profile</code>生效。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">#maven home</span>
<span class="nb">export</span> <span class="nv">MAVEN_HOME</span><span class="o">=</span>/Users/jyxiaoka/develop/apache-maven-3.6.0
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$MAVEN_HOME</span>/bin
</code></pre></div><p>在Linux中则有多种方法。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 通过修改profile文件:重启系统生效，永久有效，对所有用户有效</span>
vim /etc/profile
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/Users/jyxiaoka/develop/apache-maven-3.6.0/bin:<span class="nv">$PATH</span>
</code></pre></div><p>在eclipse中配置maven安装路径和Setting文件。
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/frameworks/eclipse-maven-setting.png"
        data-srcset="/images/frameworks/eclipse-maven-setting.png, /images/frameworks/eclipse-maven-setting.png 1.5x, /images/frameworks/eclipse-maven-setting.png 2x"
        data-sizes="auto"
        alt="/images/frameworks/eclipse-maven-setting.png"
        title="eclipse修改maven配置" /></p>
<p>修改Setting文件中的默认仓库路径，不修改使用默认的路径。
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/frameworks/mv-setting.png"
        data-srcset="/images/frameworks/mv-setting.png, /images/frameworks/mv-setting.png 1.5x, /images/frameworks/mv-setting.png 2x"
        data-sizes="auto"
        alt="/images/frameworks/mv-setting.png"
        title="eclipse修改maven配置" /></p>
<h2 id="添加servletjsp依赖">添加servlet/jsp依赖</h2>
<p>新建后没有servlet、JSP相关的jar包，所以默认的index.jsp文件会报错，所以第一步需要在maven的<code>pom.xml</code>中引入。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="c">&lt;!-- 添加servlet、jsp相关 --&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>javax.servlet<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>javax.servlet-api<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>4.0.1<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
  <span class="c">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp.jstl/jstl-api --&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>javax.servlet.jsp.jstl<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>jstl-api<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>1.2<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
</code></pre></div><h2 id="总的pomxml内容">总的pom.xml内容</h2>
<p>总的需要引入的jar包都在这里管理。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
  <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
  <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&#34;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.jyxiaoka<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>JYXiaoKaWeb<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;packaging&gt;</span>war<span class="nt">&lt;/packaging&gt;</span>
  <span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;name&gt;</span>JYXiaoKaWeb Maven Webapp<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;url&gt;</span>http://maven.apache.org<span class="nt">&lt;/url&gt;</span>
  <span class="c">&lt;!-- 在这里集中定义版本号，便于后续修改 --&gt;</span>
  <span class="nt">&lt;properties&gt;</span>

  <span class="nt">&lt;/properties&gt;</span>
  <span class="c">&lt;!-- 设置依赖 --&gt;</span>
  <span class="nt">&lt;dependencies&gt;</span>
    <span class="c">&lt;!-- 单元测试 --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>3.8.1<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- 添加servlet、jsp相关 --&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>javax.servlet<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>javax.servlet-api<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>4.0.1<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp.jstl/jstl-api --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>javax.servlet.jsp.jstl<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>jstl-api<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>1.2<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- Spring相关 --&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>spring-core<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>spring-beans<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aop --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>spring-aop<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-tx --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-tx<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- SpringMVC相关 --&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>spring-webmvc<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- Mybatis相关,mybatisjar包/mybatis整合spring的jar包 --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.mybatis<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>mybatis<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>3.5.4<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.mybatis<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>mybatis-spring<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>2.0.3<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>com.github.pagehelper<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>pagehelper<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>5.1.10<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-jdbc<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>5.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- 数据源 --&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>druid<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.1.20<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
      <span class="c">&lt;!-- MySQL驱动 --&gt;</span>
      <span class="c">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>8.0.16<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- 相关依赖 --&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.aspectj<span class="nt">&lt;/groupId &gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>aspectjweaver<span class="nt">&lt;/artifactId &gt;</span>
            <span class="nt">&lt;version&gt;</span>1.6.11<span class="nt">&lt;/version &gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="c">&lt;!-- POI Excel及Word操作API --&gt;</span>
        <span class="c">&lt;!-- https://mvnrepository.com/artifact/org.apache.poi/poi --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.poi<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>poi<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>3.17<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/org.apache.poi/poi-ooxml --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.poi<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>poi-ooxml<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>3.17<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/org.apache.poi/poi-ooxml-schemas --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.poi<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>poi-ooxml-schemas<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>3.17<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- 文件上传 --&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>commons-fileupload<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>commons-fileupload<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.3.3<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span> 
    <span class="c">&lt;!-- 日志相关 --&gt;</span>
    <span class="c">&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>slf4j-api<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.7.25<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>slf4j-log4j12<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.7.25<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
  <span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;finalName&gt;</span>JYXiaoKaWeb<span class="nt">&lt;/finalName&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div><h2 id="配置整合springspringmvc">配置整合Spring、SpringMVC</h2>
<p>想要应用所有的请求都拦截进入我们对应的控制器进行处理，然后再显示相关的界面，需要我们在<code>Web.xml</code>中配置Spring上下文加载监听器以及SpringMVC的核心控制器。</p>
<h3 id="springmvcxml">SpringMVC.xml</h3>
<p>首先在<code>src/main/resources</code>目录下或者在<code>WEB_INF</code>下新建一个<code>SpringMVC.xml</code>文件，基本的文件内容如下所示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
    <span class="na">xmlns:context=</span><span class="s">&#34;http://www.springframework.org/schema/context&#34;</span>
    <span class="na">xmlns:mvc=</span><span class="s">&#34;http://www.springframework.org/schema/mvc&#34;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
</span><span class="s">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd
</span><span class="s">        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd&#34;</span><span class="nt">&gt;</span>
 
        <span class="c">&lt;!-- 配置自动扫描的包,可以自动扫描注解 --&gt;</span>
        <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&#34;com.jyxiaoka&#34;</span><span class="nt">&gt;&lt;/context:component-scan&gt;</span>
        
        <span class="c">&lt;!-- 默认的注解映射的支持 --&gt;</span>  
      <span class="nt">&lt;mvc:annotation-driven</span> <span class="nt">/&gt;</span>  
        
      <span class="c">&lt;!-- 视图解释类 --&gt;</span>  
      <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;org.springframework.web.servlet.view.InternalResourceViewResolver&#34;</span><span class="nt">&gt;</span>  
          <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;prefix&#34;</span> <span class="na">value=</span><span class="s">&#34;/WEB-INF/views/&#34;</span><span class="nt">/&gt;</span>
          <span class="c">&lt;!--可为空,方便实现自已的依据扩展名来选择视图解释类的逻辑  --&gt;</span>  
          <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;suffix&#34;</span> <span class="na">value=</span><span class="s">&#34;.jsp&#34;</span><span class="nt">/&gt;</span>  
          <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;viewClass&#34;</span> <span class="na">value=</span><span class="s">&#34;org.springframework.web.servlet.view.JstlView&#34;</span> <span class="nt">/&gt;</span>  
      <span class="nt">&lt;/bean&gt;</span>  
        
      <span class="c">&lt;!-- 配置拦截器 --&gt;</span>  
      <span class="c">&lt;!-- &lt;mvc:interceptors&gt;  
</span><span class="c">          &lt;bean class=&#34;com.jyxiaoka.mvc.MyInteceptor&#34; /&gt;  
</span><span class="c">      &lt;/mvc:interceptors&gt;   --&gt;</span>     
        
      <span class="c">&lt;!-- 对静态资源文件的访问-不拦截 1.使用默认的处理方式 --&gt;</span>  
      <span class="nt">&lt;mvc:default-servlet-handler/&gt;</span>  
        
      <span class="c">&lt;!-- 对静态资源文件的访问-不拦截 2.自定义静态资源的访问；选择一种即可 --&gt;</span>  
      <span class="c">&lt;!-- &lt;mvc:resources mapping=&#34;/images/**&#34; location=&#34;/images/&#34; cache-period=&#34;31556926&#34;/&gt;  
</span><span class="c">      &lt;mvc:resources mapping=&#34;/js/**&#34; location=&#34;/js/&#34; cache-period=&#34;31556926&#34;/&gt;  
</span><span class="c">      &lt;mvc:resources mapping=&#34;/css/**&#34; location=&#34;/css/&#34; cache-period=&#34;31556926&#34;/&gt; --&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre></div><h3 id="webxml">Web.xml</h3>
<p>接下来在<code>Web.xml</code>中加入以下如下的内容：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">version=</span><span class="s">&#34;3.0&#34;</span> <span class="na">xmlns=</span><span class="s">&#34;http://java.sun.com/xml/ns/javaee&#34;</span>
  <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
  <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://java.sun.com/xml/ns/javaee 
</span><span class="s">  http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&#34;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;display-name&gt;</span>Archetype Created Web Application<span class="nt">&lt;/display-name&gt;</span>
  <span class="nt">&lt;welcome-file-list&gt;</span>
      <span class="nt">&lt;welcome-file&gt;</span>index.html<span class="nt">&lt;/welcome-file&gt;</span>
      <span class="nt">&lt;welcome-file&gt;</span>index.htm<span class="nt">&lt;/welcome-file&gt;</span>
      <span class="nt">&lt;welcome-file&gt;</span>index.jsp<span class="nt">&lt;/welcome-file&gt;</span>
  <span class="nt">&lt;/welcome-file-list&gt;</span>
        
  <span class="c">&lt;!-- Spring的配置,让spring岁Web启动而创建的监听器.对应的是系统级别的配置，作用范围是系统上下文 --&gt;</span>
  <span class="nt">&lt;context-param&gt;</span>
    <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
    <span class="nt">&lt;param-value&gt;</span>classpath*:applicationContext.xml<span class="nt">&lt;/param-value&gt;</span>
  <span class="nt">&lt;/context-param&gt;</span>
  <span class="nt">&lt;listener&gt;</span>
    <span class="nt">&lt;listener-class&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="nt">&lt;/listener-class&gt;</span>
  <span class="nt">&lt;/listener&gt;</span>

  <span class="c">&lt;!-- 配置DispatchcerServlet --&gt;</span>
  <span class="nt">&lt;servlet&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>springDispatcherServlet<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="nt">&lt;/servlet-class&gt;</span>
    <span class="c">&lt;!-- 配置Spring mvc下的配置文件的位置和名称 --&gt;</span>
    <span class="nt">&lt;init-param&gt;</span>
      <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
      <span class="nt">&lt;param-value&gt;</span>classpath*:SpringMVC.xml<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>
    <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
  <span class="nt">&lt;/servlet&gt;</span>

  <span class="nt">&lt;servlet-mapping&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>springDispatcherServlet<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;url-pattern&gt;</span>/<span class="nt">&lt;/url-pattern&gt;</span>
  <span class="nt">&lt;/servlet-mapping&gt;</span>
  
  <span class="c">&lt;!-- 防止乱码问题 --&gt;</span>
  <span class="nt">&lt;filter&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>SpringEncodingFilter<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;filter-class&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="nt">&lt;/filter-class&gt;</span>
        <span class="nt">&lt;init-param&gt;</span>
            <span class="nt">&lt;param-name&gt;</span>encoding<span class="nt">&lt;/param-name&gt;</span>
            <span class="nt">&lt;param-value&gt;</span>UTF-8<span class="nt">&lt;/param-value&gt;</span>
        <span class="nt">&lt;/init-param&gt;</span>
        <span class="nt">&lt;init-param&gt;</span>
            <span class="nt">&lt;param-name&gt;</span>forceEncoding<span class="nt">&lt;/param-name&gt;</span>
            <span class="nt">&lt;param-value&gt;</span>true<span class="nt">&lt;/param-value&gt;</span>
        <span class="nt">&lt;/init-param&gt;</span>
    <span class="nt">&lt;/filter&gt;</span>
    <span class="nt">&lt;filter-mapping&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>SpringEncodingFilter<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;url-pattern&gt;</span>/*<span class="nt">&lt;/url-pattern&gt;</span>
    <span class="nt">&lt;/filter-mapping&gt;</span>

<span class="nt">&lt;/web-app&gt;</span>
</code></pre></div><p>注意添加了防止乱码的过滤器后，默认会报错，信息如下：</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/frameworks/scheme%e6%8a%a5%e9%94%99.png"
        data-srcset="/images/frameworks/scheme%e6%8a%a5%e9%94%99.png, /images/frameworks/scheme%e6%8a%a5%e9%94%99.png 1.5x, /images/frameworks/scheme%e6%8a%a5%e9%94%99.png 2x"
        data-sizes="auto"
        alt="/images/frameworks/scheme报错.png"
        title="Web.xml报不规范问题" /></p>
<p>报错信息：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml">The content of element type &#34;web-app&#34; must match &#34;(icon?,display-name?,description?,distributable?,context-
 param*,filter*,filter-mapping*,listener*,servlet*,servlet-mapping*,session-config?,mime-mapping*,welcome-file-list?,error-
 page*,taglib*,resource-env-ref*,resource-ref*,security-constraint*,login-config?,security-role*,env-entry*,ejb-ref*,ejb-local-
 ref*)&#34;.
</code></pre></div><p>即文档内容标签不符合web-app_2_3.dtd的规范，要么就完全按照它规定的顺序，要么就修改web-app中的定义。</p>
<p>替换上图的头部前五行信息：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">version=</span><span class="s">&#34;3.0&#34;</span> <span class="na">xmlns=</span><span class="s">&#34;http://java.sun.com/xml/ns/javaee&#34;</span>
  <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
  <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://java.sun.com/xml/ns/javaee 
</span><span class="s">  http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&#34;</span><span class="nt">&gt;</span>
</code></pre></div><p>至此，Spring、SpringMVC的集成完成了。接下来就是测试SpringMVC以及集成Mybatis、日志框架等。</p>
<h3 id="测试springmvc">测试SpringMVC</h3>
<p>最后就可以先编写Controller来测试一下Spring、SpringMVC是否集合成功。</p>
<p>编写一个User实体类。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.jyxiaoka.vo</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * 用户类
</span><span class="cm"> * @author Jay宇
</span><span class="cm"> * @date 2020-04-23 11:49
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
  
  <span class="cm">/**
</span><span class="cm">   * 用户名
</span><span class="cm">   */</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">userName</span><span class="o">;</span>
  <span class="cm">/**
</span><span class="cm">   * 密码
</span><span class="cm">   */</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">password</span><span class="o">;</span>
  <span class="cm">/**
</span><span class="cm">   * @return the userName
</span><span class="cm">   */</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getUserName</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">userName</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="cm">/**
</span><span class="cm">   * @param userName the userName to set
</span><span class="cm">   */</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUserName</span><span class="o">(</span><span class="n">String</span> <span class="n">userName</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">userName</span> <span class="o">=</span> <span class="n">userName</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="cm">/**
</span><span class="cm">   * @return the password
</span><span class="cm">   */</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getPassword</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">password</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="cm">/**
</span><span class="cm">   * @param password the password to set
</span><span class="cm">   */</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPassword</span><span class="o">(</span><span class="n">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">;</span>
  <span class="o">}</span>
  
<span class="o">}</span>
</code></pre></div><p>编写一个Controller类。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.jyxiaoka.controller</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.ModelAndView</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.jyxiaoka.vo.User</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * 首页控制器
</span><span class="cm"> * @author Jay宇
</span><span class="cm"> * @date 2020-04-23 11:51
</span><span class="cm"> */</span>
<span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">IndexController</span> <span class="o">{</span>

  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/index&#34;</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">ModelAndView</span> <span class="nf">index</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ModelAndView</span> <span class="n">modelAndView</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelAndView</span><span class="o">();</span>
    <span class="n">modelAndView</span><span class="o">.</span><span class="na">setViewName</span><span class="o">(</span><span class="s">&#34;home&#34;</span><span class="o">);</span><span class="c1">//跳转到home.jsp页面
</span><span class="c1"></span>    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
    <span class="n">user</span><span class="o">.</span><span class="na">setUserName</span><span class="o">(</span><span class="s">&#34;Jay宇&#34;</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">&#34;user&#34;</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">modelAndView</span><span class="o">;</span>
  <span class="o">}</span>
  
<span class="o">}</span>
</code></pre></div><p>发布应用到Tomcat后，启动应用，并在浏览器中访问&rsquo;http://localhost:8080/JYXiaoKaWeb/index'。 显示指定页面而不是<code>404</code>则表示SpringMVC集成成功了。</p>
<h2 id="配置整合springmybatis">配置整合Spring、Mybatis</h2>
<p>在上述步骤中已经在web.xml中配置了让Spring随Web而启动的监听器，加载applicationContext.xml配置文件，这里主要是写入其中的内容，用于在Spring中集成其他框架或事务等。</p>
<p>在pom.xml中配置mybatis：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="c">&lt;!-- Mybatis相关 --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.mybatis<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>mybatis<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>3.5.4<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div><h3 id="applicationcontextxml">applicationContext.xml</h3>
<p>新建Spring配置文件(集成持久层框架，事务等时配置使用)。在一样的目录中新建一个<code>applicationContext.xml</code>文件，有些人是把这个文件拆开来，分为dao，service等来进行配置，这样可以比较清晰各个业务的配置。文件内容如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
    <span class="na">xmlns:context=</span><span class="s">&#34;http://www.springframework.org/schema/context&#34;</span> 
    <span class="na">xmlns:p=</span><span class="s">&#34;http://www.springframework.org/schema/p&#34;</span>
    <span class="na">xmlns:aop=</span><span class="s">&#34;http://www.springframework.org/schema/aop&#34;</span> 
    <span class="na">xmlns:tx=</span><span class="s">&#34;http://www.springframework.org/schema/tx&#34;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
</span><span class="s">    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd
</span><span class="s">    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd 
</span><span class="s">    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd
</span><span class="s">    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd&#34;</span><span class="nt">&gt;</span>
  
    <span class="c">&lt;!-- 1.加载配置文件 --&gt;</span>
    <span class="nt">&lt;context:property-placeholder</span> <span class="na">location=</span><span class="s">&#34;classpath*:*.properties&#34;</span><span class="nt">/&gt;</span>
    <span class="c">&lt;!-- 2.配置数据库连接池 --&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;dataSource&#34;</span> <span class="na">class=</span><span class="s">&#34;com.alibaba.druid.pool.DruidDataSource&#34;</span>
        <span class="na">destroy-method=</span><span class="s">&#34;close&#34;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;url&#34;</span> <span class="na">value=</span><span class="s">&#34;${jdbc.url}&#34;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;username&#34;</span> <span class="na">value=</span><span class="s">&#34;${jdbc.username}&#34;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;password&#34;</span> <span class="na">value=</span><span class="s">&#34;${jdbc.password}&#34;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;driverClassName&#34;</span> <span class="na">value=</span><span class="s">&#34;${jdbc.driver}&#34;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;maxActive&#34;</span> <span class="na">value=</span><span class="s">&#34;10&#34;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;minIdle&#34;</span> <span class="na">value=</span><span class="s">&#34;5&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
  <span class="c">&lt;!-- 3.集成持久层框架，这里集成MyBatis --&gt;</span>
  <span class="c">&lt;!-- 让spring创建并管理sqlsessionfactory，使用mybatis和spring整合包中的 --&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;sqlSessionFactory&#34;</span> <span class="na">class=</span><span class="s">&#34;org.mybatis.spring.SqlSessionFactoryBean&#34;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- 配置数据源，数据库连接池 --&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;dataSource&#34;</span> <span class="na">ref=</span><span class="s">&#34;dataSource&#34;</span> <span class="nt">/&gt;</span>
        <span class="c">&lt;!-- 加载mybatis的全局配置文件 --&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;configLocation&#34;</span> <span class="na">value=</span><span class="s">&#34;classpath:Mybatis-Config.xml&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
    <span class="c">&lt;!-- 扫描出mapper,自动创建代理对象并且在spring容器中注册。实体类类名和mapper.xml映射文件名称一致。
</span><span class="c">        自动扫描出来的mapper的bean的id为类名(首字母小写)--&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;org.mybatis.spring.mapper.MapperScannerConfigurer&#34;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;basePackage&#34;</span> <span class="na">value=</span><span class="s">&#34;com.jyxiaoka.mapper&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
  <span class="c">&lt;!-- 4.自动扫描service层的接口、实现类；可分离出独立配置文件 --&gt;</span>
    <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&#34;com.jyxiaoka.service&#34;</span> <span class="nt">/&gt;</span>
  <span class="c">&lt;!-- 5.tx , 事务相关的配置；可分离出独立配置文件 --&gt;</span>
  <span class="c">&lt;!-- 事务管理器 --&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;transactionManager&#34;</span>
        <span class="na">class=</span><span class="s">&#34;org.springframework.jdbc.datasource.DataSourceTransactionManager&#34;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- 数据源 --&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;dataSource&#34;</span> <span class="na">ref=</span><span class="s">&#34;dataSource&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
    <span class="c">&lt;!-- 通知 --&gt;</span>
    <span class="nt">&lt;tx:advice</span> <span class="na">id=</span><span class="s">&#34;txAdvice&#34;</span> <span class="na">transaction-manager=</span><span class="s">&#34;transactionManager&#34;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tx:attributes&gt;</span>
            <span class="c">&lt;!-- 传播行为 --&gt;</span>
            <span class="nt">&lt;tx:method</span> <span class="na">name=</span><span class="s">&#34;add*&#34;</span> <span class="na">propagation=</span><span class="s">&#34;REQUIRED&#34;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;tx:method</span> <span class="na">name=</span><span class="s">&#34;create*&#34;</span> <span class="na">propagation=</span><span class="s">&#34;REQUIRED&#34;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;tx:method</span> <span class="na">name=</span><span class="s">&#34;insert*&#34;</span> <span class="na">propagation=</span><span class="s">&#34;REQUIRED&#34;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;tx:method</span> <span class="na">name=</span><span class="s">&#34;save*&#34;</span> <span class="na">propagation=</span><span class="s">&#34;REQUIRED&#34;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;tx:method</span> <span class="na">name=</span><span class="s">&#34;update*&#34;</span> <span class="na">propagation=</span><span class="s">&#34;REQUIRED&#34;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;tx:method</span> <span class="na">name=</span><span class="s">&#34;delete*&#34;</span> <span class="na">propagation=</span><span class="s">&#34;REQUIRED&#34;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;tx:method</span> <span class="na">name=</span><span class="s">&#34;find*&#34;</span> <span class="na">propagation=</span><span class="s">&#34;SUPPORTS&#34;</span> <span class="na">read-only=</span><span class="s">&#34;true&#34;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;tx:method</span> <span class="na">name=</span><span class="s">&#34;select*&#34;</span> <span class="na">propagation=</span><span class="s">&#34;SUPPORTS&#34;</span> <span class="na">read-only=</span><span class="s">&#34;true&#34;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;tx:method</span> <span class="na">name=</span><span class="s">&#34;get*&#34;</span> <span class="na">propagation=</span><span class="s">&#34;SUPPORTS&#34;</span> <span class="na">read-only=</span><span class="s">&#34;true&#34;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/tx:attributes&gt;</span>
    <span class="nt">&lt;/tx:advice&gt;</span>
    <span class="c">&lt;!-- 切面 --&gt;</span>
    <span class="nt">&lt;aop:config&gt;</span>
        <span class="nt">&lt;aop:advisor</span> <span class="na">advice-ref=</span><span class="s">&#34;txAdvice&#34;</span>
            <span class="na">pointcut=</span><span class="s">&#34;execution(* com.zwp.service.*.*(..))&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/aop:config&gt;</span>
<span class="nt">&lt;/beans&gt;</span>  
</code></pre></div><h4 id="mybatis-configxml">Mybatis-Config.xml</h4>
<p>新建Mybatis的配置文件，内容如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE configuration
</span><span class="cp">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span><span class="cp">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
<span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="c">&lt;!-- 分页插件 --&gt;</span>
        <span class="nt">&lt;plugin</span> <span class="na">interceptor=</span><span class="s">&#34;com.github.pagehelper.PageHelper&#34;</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- 设置数据库类型 Oracle,Mysql,MariaDB,SQLite,Hsqldb,PostgreSQL六种数据库 --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;dialect&#34;</span> <span class="na">value=</span><span class="s">&#34;mysql&#34;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div><h3 id="dbproperties">db.properties</h3>
<p>这是数据库的配置文件，在配置数据源时用到。</p>
<pre><code>jdbc.url = jdbc:mysql://localhost:3306/jyxiaoka
jdbc.username = root
jdbc.password = 123456
jdbc.driver = com.mysql.jdbc.Driver
</code></pre><h3 id="测试整合情况">测试整合情况</h3>
<p>为了测试Mybatis与Spring是否整合成功，编写User的Vo类，UserMapper.xml映射文件，以及UserDao持久层接口类。也可以使用<a href="http://mybatis.org/generator/configreference/xmlconfig.html" target="_blank" rel="noopener noreffer">MyBatis Generator</a>插件来自动生成对应的Vo类、mapper文件以及对应的Dao类。</p>
<p><code>User.java</code>，已经在上面写过，这里就不再重复了。</p>
<p><code>UserMapper.xml</code>，映射文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper
</span><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
<span class="nt">&lt;mapper</span> <span class="na">namespace=</span><span class="s">&#34;com.jyxiaoka.dao.UserDao&#34;</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- 建立字段对应关系 --&gt;</span>
  <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&#34;User&#34;</span> <span class="na">type=</span><span class="s">&#34;com.jyxiaoka.vo.User&#34;</span><span class="nt">&gt;</span>  
      <span class="nt">&lt;id</span> <span class="na">column=</span><span class="s">&#34;id&#34;</span> <span class="na">property=</span><span class="s">&#34;id&#34;</span> <span class="na">jdbcType=</span><span class="s">&#34;VARCHAR&#34;</span> <span class="nt">/&gt;</span>  
      <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">&#34;user_name&#34;</span> <span class="na">property=</span><span class="s">&#34;userName&#34;</span> <span class="na">jdbcType=</span><span class="s">&#34;VARCHAR&#34;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">&#34;password&#34;</span> <span class="na">property=</span><span class="s">&#34;password&#34;</span> <span class="na">jdbcType=</span><span class="s">&#34;VARCHAR&#34;</span> <span class="nt">/&gt;</span>   
   <span class="nt">&lt;/resultMap&gt;</span>
  <span class="c">&lt;!-- 插入 --&gt;</span>
  <span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">&#34;addUser&#34;</span><span class="nt">&gt;</span>
    insert into jy_user(id,user_name,password)
    values (#{id},#{userName},#{password})
  <span class="nt">&lt;/insert&gt;</span>
  <span class="c">&lt;!-- 查询 --&gt;</span>
  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;getUserById&#34;</span> <span class="na">parameterType=</span><span class="s">&#34;java.lang.String&#34;</span> <span class="na">resultMap=</span><span class="s">&#34;User&#34;</span><span class="nt">&gt;</span>
    select * from jy_user where id = #{id}
  <span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div><p><code>UserDao.java</code>，操作数据库的Dao 接口定义。不需要实现类，由Spring扫描并注入。可以把mapper看做是它的实现类。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.jyxiaoka.dao</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.jyxiaoka.vo.User</span><span class="o">;</span>

<span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserDao</span> <span class="o">{</span>
  
  <span class="cm">/**
</span><span class="cm">   * 添加一个用户
</span><span class="cm">   * @param user
</span><span class="cm">   * @return
</span><span class="cm">   */</span>
  <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">addUser</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">);</span>
  
  <span class="cm">/**
</span><span class="cm">   * 根据用户ID查找用户
</span><span class="cm">   * @param Id
</span><span class="cm">   * @return
</span><span class="cm">   */</span>
  <span class="kd">public</span> <span class="n">User</span> <span class="nf">getUserById</span><span class="o">(</span><span class="n">String</span> <span class="n">id</span><span class="o">);</span>

<span class="o">}</span>
</code></pre></div><p><code>UserController.java</code>，前端请求控制层，处理或转发相关请求。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.jyxiaoka.controller</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.jyxiaoka.service.UserService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.jyxiaoka.vo.User</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/user&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserController</span> <span class="o">{</span>
  
  <span class="nd">@Autowired</span>
  <span class="kd">private</span> <span class="n">UserService</span> <span class="n">userService</span><span class="o">;</span>
  
  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/center&#34;</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">personCenter</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">id</span> <span class="o">=</span> <span class="s">&#34;123456&#34;</span><span class="o">;</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span>  <span class="n">userService</span><span class="o">.</span><span class="na">findByUserId</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;用户名：&#34;</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="na">getUserName</span><span class="o">());</span>
  <span class="o">}</span>
  
  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/add&#34;</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addUser</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
    <span class="n">user</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">&#34;aabbcc&#34;</span><span class="o">);</span>
    <span class="n">user</span><span class="o">.</span><span class="na">setUserName</span><span class="o">(</span><span class="s">&#34;Jay宇&#34;</span><span class="o">);</span>
    <span class="n">user</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">&#34;123456&#34;</span><span class="o">);</span>
    <span class="n">userService</span><span class="o">.</span><span class="na">addUser</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    
  <span class="o">}</span>

<span class="o">}</span>
</code></pre></div><p>在MySQL中创建一个数据库jyxiaoka，然后创建一个表user，简单的添加3个字段。最后在浏览器中访问相关URL进行测试，查看数据或者控制台输出验证是否正常。至此，SSM框架整合完成。</p>
<h2 id="配置整合log4j日志框架slf4j">配置整合log4j日志框架(slf4j)</h2>
<p>log4j的日志框架在应用中很有必要添加，是必备的一个日志收集功能，所以这里简单的说明配置使用方法。
可以选用log4j或者slf4j，这里使用slf4j，关于这两者的比较见：<a href="https://www.oschina.net/translate/why-use-sl4j-over-log4j-for-logging" target="_blank" rel="noopener noreffer">为什么使用slf4j而不是log4j来作日志收集?</a> 这一篇文章。</p>
<p>首先引入slf4j相关jar包，在pox.xml文件中引入，具体见上面pom.xml文件内容。在maven仓库中搜索<code>slf4j</code>找到后复制即可。引入两个org.slf4j相关的jar包。</p>
<h3 id="log4jproperties文件">log4j.properties文件</h3>
<p>在src目录下创建log4j.properties配置文件，系统会自动在classes目录读取该配置文件，注意文件名不能变。基础的文件内容如下所示，不做具体、详细介绍。以下内容从项目中拿的的，可根据个人需求修改相关配置。</p>
<pre><code>log4j.rootLogger=info,console,file
# log4j.rootLogger=WARN, stdout, logfile

# myBatis
log4j.logger.org.apache.ibatis=warn
log4j.logger.org.apache.ibatis.transaction=warn
log4j.logger.java.sql.Connection=warn
log4j.logger.java.sql.Statement=warn
log4j.logger.java.sql.PreparedStatement=warn
log4j.logger.java.sql.ResultSet=warn

# Spring
log4j.logger.org.springframework =warn
log4j.logger.org.springframework.jdbc=warn

log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.Threshold =debug
log4j.appender.console.Target=System.out
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=%d %p [%c] - %m%n

# log file
log4j.appender.file=org.apache.log4j.DailyRollingFileAppender
log4j.appender.file.DatePattern='_'yyyy-MM-dd'.log'
#log4j.appender.file.MaxFileSize=7
log4j.appender.file.File=${catalina.home}/logs/jyxiaoka/jyweb.log
log4j.appender.file.Append=true
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d %p [%c] - %m%n
log4j.appender.file.encoding=UTF-8
</code></pre><h3 id="在代码中使用日志器">在代码中使用日志器</h3>
<p>在Java代码中使用很简单，只需要获取一个日志器就可以使用了。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/user&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserController</span> <span class="o">{</span>
  <span class="c1">//获取日志记录器
</span><span class="c1"></span>  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">UserController</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  
  <span class="nd">@Autowired</span>
  <span class="kd">private</span> <span class="n">UserService</span> <span class="n">userService</span><span class="o">;</span>
  
  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/center&#34;</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">personCenter</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">id</span> <span class="o">=</span> <span class="s">&#34;123&#34;</span><span class="o">;</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span>  <span class="n">userService</span><span class="o">.</span><span class="na">findByUserId</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;用户名：&#34;</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="na">getUserName</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>至此，一整套的框架，包括日志框架的搭建就完成了。接下来就可以愉快地写各种代码业务逻辑了。</p></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2020-03-21</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="http://example.org/Java/ssm_build.html" data-title="Spring、SpringMVC、Mybatis框架搭建过程" data-hashtags="Java,框架"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="http://example.org/Java/ssm_build.html" data-hashtag="Java"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="http://example.org/Java/ssm_build.html" data-title="Spring、SpringMVC、Mybatis框架搭建过程"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="http://example.org/Java/ssm_build.html" data-title="Spring、SpringMVC、Mybatis框架搭建过程"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="http://example.org/Java/ssm_build.html" data-title="Spring、SpringMVC、Mybatis框架搭建过程"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/java/">Java</a>,&nbsp;<a href="/tags/%E6%A1%86%E6%9E%B6/">框架</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/Java/builder_pattern.html" class="prev" rel="prev" title="Effective-Java之构建器模式"><i class="fas fa-angle-left fa-fw"></i>Effective-Java之构建器模式</a>
            <a href="/tools/virtualbox_setting.html" class="next" rel="next" title="如何访问VirtualBox上的Linux虚拟机">如何访问VirtualBox上的Linux虚拟机<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{"valine":{"appId":"6qv6pVH0bHACP8wyqXNCgWKc-gzGzoHsz","appKey":"sq3plPOv9qQbP3RTopbRJ7gO","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@5.0.1/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"zh-cn","pageSize":10,"placeholder":"来都来了，请留下您的足迹~","recordIP":true,"serverURLs":"https://leancloud.hugoloveit.com","visitor":true}}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
